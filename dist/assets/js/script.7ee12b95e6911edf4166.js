!function(e){function t(t){for(var n,l,c=t[0],i=t[1],u=t[2],m=0,f=[];m<c.length;m++)l=c[m],Object.prototype.hasOwnProperty.call(r,l)&&r[l]&&f.push(r[l][0]),r[l]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);for(s&&s(t);f.length;)f.shift()();return o.push.apply(o,u||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,c=1;c<a.length;c++){var i=a[c];0!==r[i]&&(n=!1)}n&&(o.splice(t--,1),e=l(l.s=a[0]))}return e}var n={},r={0:0},o=[];function l(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,l),a.l=!0,a.exports}l.m=e,l.c=n,l.d=function(e,t,a){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(l.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(a,n,function(t){return e[t]}.bind(null,n));return a},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/";var c=window.webpackJsonp=window.webpackJsonp||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var s=i;o.push([288,1]),a()}({168:function(e,t,a){e.exports={root:"_3mzvt2dfIcxezlBOA_zAyl","start-col":"_3BOOTK9MCLyWGkRfwokeSU",col:"_3jgevgdoAcNg41bS9Di1ok"}},208:function(e,t,a){e.exports={root:"_1Tsp9tDRxFDaCmH9rOQGnQ","inner-elem":"_2iThc5dqDVtQ9k1akJVwOr",start:"y9nOZJSfJPtqkI3MhfJq9",end:"_3fu-yG2kfRcor4IljHOnon"}},284:function(e,t,a){e.exports={"select-element":"_2ctkSYaW2EH_keCx5s1m3e"}},288:function(e,t,a){a(289),e.exports=a(623)},34:function(e,t,a){e.exports={"page-title":"_3SFFJOXbud1k2janVVLpfG",form:"_2ZCOB-XfI4r1DS0LU92GiB","form-field":"_191R7kZB47ncfKa-dfXSGS","form-field__select-wrap":"WxvaEylXGJJ-6JggBkv4H","select-label":"_3OGZzezyoVTM48ZqOqmGgP","select-element":"_332UtWNFZchEpcLkIhRWa","input-elem":"_5XGyOba1Eb395OX_VziUn","form-field__input-date-wrap":"_1ePDtYdnBVrUNZD6Q-xqSF","date-input":"_2uoUyIeUMAuzuFUys1tuk4","submit-button":"T5FespIgZ97wanDaisqtO","select-component":"_2qPLoP8uAavsn5Y8lqYt7d"}},46:function(e,t,a){e.exports={"page-title":"_2jDy73cdxRg-Iudg1deQfv","button-new-object":"_12QqcsRMtYgWEvHalIsuwr","button-new-object__text":"_2pzb4YgRDF6lSRTdecCDv3",wrap:"_3GIJehpypSDZhx454yqVJ",wrap__manage:"_18galqCmAJrrvT9-GzQd36",wrap__select:"_24ra3z2p7LchnuvKqHw57i",wrap__year:"_38v1ZvAIdWdpPO9A53ZEZA","one-row":"_1dDAuYKonLDsUDVf-kkDIP","one-row__number":"YHGLrO65hMGx5o8VEeM7S","one-row__elem":"_2NTEiRMdBmvKh47gjsJiQH","one-row__buttons":"_1qcwfV9tMQTp6T9XsDUFbh","one-row__redaction":"_3lwIgGf9OtNin9YJAqxfzB","one-row__delete":"_366yikAp2AnNIK4ot0XeXT"}},478:function(e,t,a){},479:function(e,t,a){},49:function(e,t,a){e.exports={"page-title":"_2-k3FYOPrLISgLXBykC8sN","button-new-object":"_3TW37yoBtHB-Bw4HQPwv3y","button-new-object__text":"_2wHhUmTv4QDY3t_MbYtPy8",wrap:"_1DNvf0QXOMJVX3cII7ND-D",wrap__manage:"_3ZPlpjT_ocRb7FIKf3mYYM",wrap__select:"_1U3SCqpegzboLEcTzNNDB2",wrap__year:"_3yu5OCTrHNuG-_vKR50DBI","one-row":"k4II8IW3WBuDV5J0kPFwh","one-row__number":"_2ApsrToSdo1tUgswG4kzsG","one-row__elem":"_7airtp7tUiymkRYapwa_","one-row__name_position":"_10vycUjJQLrs0e5KYUmrlJ","one-row__buttons_position":"_11vjfBbwB8tLp_Op12mHOF","one-row__buttons":"_1aYOD30kO2hPA1WEgE1BYZ","one-row__redaction":"iAPBMqWISb32d0qJo-oil","one-row__delete":"_3VwGWA_PqTZHGpNMonQD_n"}},51:function(e,t,a){e.exports={"page-title":"_2mExhhM5jAILzoiNju52Po",form:"nfFaYQxcDQPh72oufHiNU","form-field":"_1cadmoRwa6Zfg7osvTfz9n","form-field__select-wrap":"TKYqMSoCWoh0RxFGzjl9s","select-label":"_36a6_DyivUl6tB7_PZwGUT","select-element":"_3E7dPJGQTabkCd7x8wTJpK","form-field__input-date-wrap":"_3mkGR6c2mGtdNJ_6ZchWeN","date-input":"KlkYhcEf3Flk91ImRR5__","submit-button":"_1TCWZm2lwuQIWY1NLXdp59"}},537:function(e,t,a){},538:function(e,t,a){},59:function(e,t,a){e.exports={"page-title":"_38q-9poBQkyqGaWcx6-viG","button-new-object":"_2k2lpxZSN5otGYn3HmArxJ","button-new-object__text":"_2d4AEC2ESCS0z9G3UTNyYR",wrap:"_1eheVT3tBtToQ-CGA0WtpJ",wrap__manage:"_3b-ypER_K2igF4JPTktcla",wrap__select:"_2rKq9LNy6IkHI1qITHzsVk",wrap__year:"_3RTqoWOUq5m5pbMStf3oVR","one-row":"_2agi48okGSt1XZjahPPOZJ","one-row__number":"_2RCznjSWuPGOLYcyLY2XTZ","one-row__elem":"Pih9F-rb87ymQ3t-t6nSg","one-row__name_position":"_1ClEEGLlf9dNTMF41Ia456","one-row__buttons_position":"_2dgFWx4QP3w_xZrtC2EL7B","one-row__buttons":"_1EbMRE1YbeYC5Pl1nEOPIp","one-row__redaction":"_3mM2ks5Ols_nVOFWixhH9g","one-row__delete":"_3p6wK-zIbUVCOxg2NJ-ki7"}},622:function(e,t,a){},623:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),l=a(25),c=a.n(l),i=(a(478),a(40)),u=(a(479),a(624)),s=a(627),m=a(285),f=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(m.a,{type:"primary",danger:!0,onClick:e.logoutPlz},"Выйти"))},d=o.a.createContext(null),p=a(45),b=a(628);function v(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var y=(v(n={home:{title:"Главная",url:"/"},users:{title:"Пользователи",url:"/users"},user:{title:"Пользователь",url:"/user/:id"}},"new-user",{title:"Пользователи",url:"/user/new-user"}),v(n,"vacations",{title:"Отпуска",url:"/vacations"}),v(n,"vacation",{title:"Отпуск",url:"/vacation/:id"}),v(n,"new-vacation",{title:"Новый отпуск",url:"/vacation/new-vacation"}),v(n,"departments",{title:"Отделы",url:"/departments"}),v(n,"department",{title:"Отдел",url:"/department/:id"}),v(n,"new-department",{title:"Новый отдел",url:"/department/new-department"}),n),_=o.a.createContext(null),g=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],h=99999,w=900,E=901;function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return j(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var S=function(){var e=Object(r.useContext)(_),t=(e.login,e.userData);console.log(Object(r.useContext)(_));var a=O(Object(r.useState)(w),2),n=a[0],l=a[1];return Object(r.useEffect)((function(){t&&l(t.role_id)}),[t]),o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{theme:"dark",mode:"horizontal"},o.a.createElement(b.a.Item,{key:"1"},o.a.createElement(p.c,{to:y.home.url},y.home.title)),n!==w?n!==E?o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a.Item,{key:"2"},o.a.createElement(p.c,{to:y.users.url},y.users.title)),o.a.createElement(b.a.Item,{key:"3"},o.a.createElement(p.c,{to:y.vacations.url},y.vacations.title)),o.a.createElement(b.a.Item,{key:"4"},o.a.createElement(p.c,{to:y.departments.url},y.departments.title))):o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a.Item,{key:"3"},o.a.createElement(p.c,{to:y.vacations.url},y.vacations.title))):o.a.createElement(o.a.Fragment,null)))};function D(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var N=u.a.Header,A=u.a.Content,I=u.a.Footer,x=(s.a.Title,function(e){var t=e.children,a=D(e,["children"]),n=Object(r.useContext)(d).auth,l=a.history;return o.a.createElement(o.a.Fragment,null,o.a.createElement(u.a,{className:"layout"},o.a.createElement(N,null,o.a.createElement("i",{style:{color:"rgba(255, 255, 255, 0.65)"}},"когданибудьздесьбудетлого"),o.a.createElement(S,null),o.a.createElement("div",null,o.a.createElement(f,{logoutPlz:function(){console.log("ок, logout"),n.signOut(),localStorage.removeItem("userId"),l.push("/auth")}}))),o.a.createElement(A,{style:{padding:"0 50px",overflow:"auto"}},o.a.createElement("div",{className:"site-layout-content"},t)),o.a.createElement(I,{style:{textAlign:"center"}},"Created by DVM-Group")))}),F=(a(537),a(626)),C=a(629),k=a(630),T=a(625),Y=(a(538),function(){return o.a.createElement("div",{className:"work-area preloader"},o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"preloader-wrapper big active"},o.a.createElement(k.b,{size:"middle"},o.a.createElement(T.a,{size:"large"})))))});function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var V={labelCol:{span:8},wrapperCol:{span:16}},U={wrapperCol:{offset:8,span:16}},L=function(e){var t=R(Object(r.useState)(!0),2),a=t[0],n=t[1];Object(r.useEffect)((function(){return n(!1)}),[]);var l=R(Object(r.useState)(null),2),c=l[0],i=l[1];Object(r.useEffect)((function(){var t=e.history;i(t)}),[e]);var u=R(Object(r.useState)(!1),2),s=u[0],f=u[1],p=Object(r.useContext)(d).signWithEmail;Object(r.useEffect)((function(){!0===s&&c.push("/")}),[s,c]);return a?o.a.createElement(Y,null):o.a.createElement("div",{className:"form-wrap"},o.a.createElement(F.a,P({},V,{name:"basic",initialValues:{remember:!0},onFinish:function(e){var t=e.email,a=e.password;p(t,a).then((function(e){console.log("Success!"),f(!0),localStorage.setItem("userId",e.user.uid),c.push("/")})).catch((function(){console.log("кто ты тварь?"),f(!1)}))},onFinishFailed:function(e){console.log("Failed:",e)},className:"form"}),o.a.createElement(F.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email!"}]},o.a.createElement(C.a,null)),o.a.createElement(F.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}]},o.a.createElement(C.a.Password,null)),o.a.createElement(F.a.Item,U,o.a.createElement(m.a,{type:"primary",htmlType:"submit"},"Войти"))))};function G(){return(G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function J(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var q=function(e){var t=e.component,a=J(e,["component"]);return o.a.createElement(i.b,G({},a,{render:function(e){return localStorage.getItem("userId")?o.a.createElement(x,null,o.a.createElement(t,e)):o.a.createElement(i.a,{to:"/auth"})}}))},z=a(2),B=a.n(z),Z=a(87),W=a.n(Z),H=a(168),Q=a.n(H),K=a(208),X=a.n(K),$=function(e){var t=e.data,a=(e.name,e.index,31);return t&&(a=new Date(t[0].year,t[0].monthNumber,0).getDate()),o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:B()(X.a.root)},null!=t?o.a.createElement("div",{className:B()(X.a["inner-elem"]),style:{left:"".concat((t[0].day-1)/(a-1)*100,"%"),right:"".concat(a===+t[1].day?0:(a-1-(+t[1].day-1))/(a-1)*100,"%")}}):o.a.createElement(o.a.Fragment,null)))},ee=function(e){var t=e.name,a=(e.id,e.vacations);return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:B()(Q.a.root)},o.a.createElement("div",{className:B()(Q.a["start-col"])},t),g.map((function(e,n){var r=a.find((function(e){return+e[0].monthNumber==+n}));return o.a.createElement("div",{key:n,className:B()(Q.a.col)},o.a.createElement($,{data:r||null,name:t,index:+n}))}))))},te=a(284),ae=a.n(te);function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var oe=function(e){var t=e.identificate,a=(e.title,e.defaultValue),n=e.handleFunction,l=e.data,c=ne(Object(r.useState)(a),2),i=c[0],u=c[1];Object(r.useEffect)((function(){u(a)}),[a]);return o.a.createElement(o.a.Fragment,null,o.a.createElement("select",{id:t,name:t,value:+i,onChange:function(e){n(+e.target.value),u(+e.target.value)},className:B()(ae.a["select-element"])},l?l.map((function(e){return o.a.createElement("option",{key:e.id,value:+e.id},e.name)})):o.a.createElement("option",null,"Загружаем года ...")))};function le(){return(le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ie(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var ue=function(e){var t=ce(Object(r.useState)([]),2),a=t[0],n=t[1],l=ce(Object(r.useState)([]),2),c=l[0],i=l[1],u=ce(Object(r.useState)([]),2),s=u[0],m=u[1],f=ce(Object(r.useState)([]),2),p=f[0],b=f[1],v=ce(Object(r.useState)(2021),2),y=(v[0],v[1],ce(Object(r.useState)(0),2)),O=y[0],j=y[1],S=ce(Object(r.useState)([]),2),D=S[0],N=S[1],A=ce(Object(r.useState)((new Date).getFullYear()),2),I=A[0],x=A[1],F=Object(r.useContext)(d),C=(F.getUsersRef,F.getDepartmentsRef,F.getVacationsRef,F.getYearsRef,Object(r.useContext)(_)),k=C.userData,T=C.allUsersData,Y=C.allVacationsData,P=C.allDepartmentsData,R=C.allYearsData,M=ce(Object(r.useState)(w),2),V=M[0],U=M[1],L=ce(Object(r.useState)(0),2),G=L[0],J=L[1];Object(r.useEffect)((function(){N(R)}),[R]),Object(r.useEffect)((function(){n(T)}),[T]),Object(r.useEffect)((function(){if(+V===w||+V===E&&P.length>0){var e=P.filter((function(e){return+e.id==+G}));e.length>0&&(i(e),j(e[0].id))}else{P.find((function(e){return e.id===h}))?(i(P),j(P[0].id)):(P.unshift({id:h,name:"Все"}),i(P),j(P[0].id))}}),[P,V,G]),Object(r.useEffect)((function(){m(Y)}),[Y]),Object(r.useEffect)((function(){var e=(O===h?a:a.filter((function(e){return+e.department_id==+O}))).map((function(e){var t=s.filter((function(t){return+t.user_id==+e.id&&new Date(+t.vacation_start).getFullYear()===I})),a=[];return t.forEach((function(e){var t=e.vacation_start,n=e.vacation_end;new Date(t).getMonth()===new Date(n).getMonth()?a.push([{type:"start",monthNumber:new Date(+e.vacation_start).getMonth(),day:new Date(+e.vacation_start).getDate(),year:new Date(+e.vacation_start).getFullYear(),date:e.vacation_start},{type:"end",monthNumber:new Date(+e.vacation_end).getMonth(),day:new Date(+e.vacation_end).getDate(),year:new Date(+e.vacation_end).getFullYear(),date:e.vacation_end}]):(a.push([{type:"start",monthNumber:new Date(+e.vacation_start).getMonth(),day:new Date(+e.vacation_start).getDate(),year:new Date(+e.vacation_start).getFullYear(),date:e.vacation_start},{type:"end",monthNumber:new Date(+e.vacation_start).getMonth(),day:new Date(new Date(+e.vacation_start).getFullYear(),new Date(+e.vacation_start).getMonth()+1,0).getDate(),year:new Date(+e.vacation_start).getFullYear(),date:e.vacation_end}]),a.push([{type:"start",monthNumber:new Date(+e.vacation_end).getMonth(),day:new Date(new Date(+e.vacation_end).getFullYear(),new Date(+e.vacation_end).getMonth(),1).getDate(),year:new Date(+e.vacation_end).getFullYear(),date:e.vacation_end},{type:"end",monthNumber:new Date(+e.vacation_end).getMonth(),day:new Date(+e.vacation_end).getDate(),year:new Date(+e.vacation_end).getFullYear(),date:e.vacation_end}]))})),{name:"".concat(e.name," ").concat(e.surname),id:e.id,vacations:a}}));b(e)}),[a,s,c,I,O]),Object(r.useEffect)((function(){k&&(U(k.role_id),J(k.department_id))}),[k]);return o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",{className:B()(W.a["page-title"])},"Расписание, дорогой(-ая)!"),o.a.createElement("div",{className:B()(W.a.wrap__manage)},o.a.createElement("div",{className:B()(W.a.wrap__year)},o.a.createElement(oe,{identificate:"selectYear",title:"Выберите год",defaultValue:(new Date).getFullYear(),handleFunction:function(e){x(+e)},data:D})),o.a.createElement("div",{className:B()(W.a.wrap__select)},o.a.createElement(oe,{identificate:"selectDepartmentOnMainPage",title:"Выберите отдел",defaultValue:O,handleFunction:function(e){j(+e)},data:c}))),o.a.createElement("div",null,o.a.createElement("div",{className:B()(W.a["content-title-block"])},o.a.createElement("div",{className:B()(W.a["content-title-block__start-elem"])},"Пользователи"),g.map((function(e){return o.a.createElement("div",{key:e,className:B()(W.a["content-title-block__elem"])},e)}))),o.a.createElement("div",{className:B()(W.a["content-body-block"])},p.map((function(e){return o.a.createElement(ee,le({key:e.id},e))})))))},se=a(49),me=a.n(se);function fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return de(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return de(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var pe=function(e){var t=fe(Object(r.useState)([]),2),a=t[0],n=t[1],l=fe(Object(r.useState)([]),2),c=l[0],i=l[1],u=fe(Object(r.useState)(0),2),s=u[0],m=u[1],f=fe(Object(r.useState)([]),2),b=f[0],v=f[1],y=Object(r.useContext)(d),_=y.getUsersRef,g=y.getDepartmentsRef;Object(r.useEffect)((function(){_().once("value").then((function(e){return e.val()})).then((function(e){return n(e)})).catch((function(e){return console.log(e)}))}),[]),Object(r.useEffect)((function(){g().once("value").then((function(e){return e.val()})).then((function(e){e.unshift({id:h,name:"Все"}),i(e),m(e[0].id)})).catch((function(e){return console.log(e)}))}),[]),Object(r.useEffect)((function(){var e=s===h?a:a.filter((function(e){return+e.department_id==+s}));v(e)}),[s]);return o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",{className:B()(me.a["page-title"])},"Список пользователей"),o.a.createElement("div",{className:B()(me.a.wrap)},o.a.createElement("div",{className:B()(me.a["wrap__add-vacation"])},o.a.createElement(p.b,{to:"user/new-user",className:B()(me.a["button-new-object"],me.a[".button-new-object__text"])},"Новый пользователь")),o.a.createElement("div",{className:B()(me.a.wrap__manage)},o.a.createElement("div",{className:B()(me.a.wrap__select)},o.a.createElement(oe,{identificate:"selectDepartmentInUserList",title:"Выберите отдел",defaultValue:s,handleFunction:function(e){m(e)},data:c})))),o.a.createElement("div",null,b.map((function(e,t){return o.a.createElement("div",{key:e.id,className:B()(me.a["one-row"])},o.a.createElement("div",{className:B()(me.a["one-row__number"])},o.a.createElement("span",null,"".concat(t+1,"."))),o.a.createElement("div",{className:B()(me.a["one-row__name"],me.a["one-row__elem"],me.a["one-row__name_position"])},"".concat(e.name," ").concat(e.surname)),o.a.createElement("div",{className:B()(me.a["one-row__buttons"],me.a["one-row__elem"],me.a["one-row__buttons_position"])},o.a.createElement(p.b,{to:"/user/".concat(e.id),className:B()(me.a["one-row__redaction"])},"Редактировать"),o.a.createElement("button",{onClick:function(){return function(e){console.log("delete",e);var t=a.filter((function(t){return t.id!==e}));n(t),_().set(t)}(e.id)},className:B()(me.a["one-row__delete"])},"Удалить")))}))))},be=a(59),ve=a.n(be);function ye(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _e(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return _e(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _e(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var ge=function(e){var t=ye(Object(r.useState)([]),2),a=(t[0],t[1]),n=ye(Object(r.useState)([]),2),l=n[0],c=n[1],i=ye(Object(r.useState)([]),2),u=(i[0],i[1]),s=Object(r.useContext)(d),m=s.getUsersRef,f=s.getDepartmentsRef,b=s.getVacationsRef;Object(r.useEffect)((function(){m().once("value").then((function(e){return e.val()})).then((function(e){return a(e)})).catch((function(e){return console.log(e)}))}),[]),Object(r.useEffect)((function(){f().once("value").then((function(e){return e.val()})).then((function(e){return c(e)})).catch((function(e){return console.log(e)}))}),[]),Object(r.useEffect)((function(){b().once("value").then((function(e){return e.val()})).then((function(e){return u(e)})).catch((function(e){return console.log(e)}))}),[]);return o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",{className:B()(ve.a["page-title"])},"Список отделов компании"),o.a.createElement("div",{className:B()(ve.a.wrap)},o.a.createElement(p.b,{to:"department/new-department",className:B()(ve.a["button-new-object"],ve.a[".button-new-object__text"])},"Добавить отдел")),o.a.createElement("div",null,l.map((function(e,t){return o.a.createElement("div",{key:e.id,className:B()(ve.a["one-row"])},o.a.createElement("div",{className:B()(ve.a["one-row__number"])},o.a.createElement("span",null,"".concat(t+1,"."))),o.a.createElement("div",{className:B()(ve.a["one-row__name"],ve.a["one-row__elem"],ve.a["one-row__name_position"])},e.name),o.a.createElement("div",{className:B()(ve.a["one-row__buttons"],ve.a["one-row__elem"],ve.a["one-row__buttons_position"])},o.a.createElement(p.b,{to:"department/".concat(e.id),className:B()(ve.a["one-row__redaction"])},"Редактировать"),o.a.createElement("button",{onClick:function(){return t=e.id,a=l.filter((function(e){return e.id!==t})),c(a),void f().set(a);var t,a},className:B()(ve.a["one-row__delete"])},"Удалить")))}))))},he=a(88),we=a.n(he);function Ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Oe(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Oe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var je=function(e){var t=e.history,a=Ee(Object(r.useState)(e.match.params.id),2),n=a[0],l=(a[1],Ee(Object(r.useState)([]),2)),c=l[0],i=l[1],u=Ee(Object(r.useState)(""),2),s=u[0],m=u[1],f=Ee(Object(r.useState)(0),2),p=f[0],b=f[1],v=Object(r.useContext)(d).getDepartmentsRef;Object(r.useEffect)((function(){v().once("value").then((function(e){return e.val()})).then((function(e){return i(e),e})).then((function(e){if(console.log(n),"new-department"!==n&&0!==n){console.log(e);var t=e.filter((function(e){return e.id===+n}));console.log(t),m(t[0].name),b(t[0].id),console.log(t[0].name)}else m(""),b((new Date).getTime())})).catch((function(e){return console.log(e)}))}),[]);return o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",{className:B()(we.a["page-title"])},"new-department"===n?"Новый отдел":"Редактировать отдел"),o.a.createElement("div",null,o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),console.log(n,p);var a=c.findIndex((function(e){return+e.id==+p}));console.log(c,a),-1!==a?(c[+a].name=s,v().set(c).then((function(){return t.push("/departments")})).catch((function(e){return console.log(e)}))):(c.push({name:s,id:(new Date).getTime()}),console.log(c),v().set(c).then((function(){return t.push("/departments")})).catch((function(e){return console.log(e)})))},className:B()(we.a.form)},o.a.createElement("div",{className:B()(we.a["form-field"],we.a["form-field__select-wrap"])},o.a.createElement("label",{htmlFor:"name",className:B()(we.a["select-label"])},"Название отдела:"),o.a.createElement("input",{type:"text",id:"name",name:"name","data-index":p,defaultValue:s,placeholder:s,onChange:function(e){m(e.target.value),b(e.target.dataset.index)},className:B()(we.a["input-elem"])})),o.a.createElement("div",{className:B()(we.a["form-field"])},o.a.createElement("button",{className:B()(we.a["submit-button"])},"Отправить")))))},Se=a(46),De=a.n(Se);function Ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ae(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ae(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Ie=function(e){var t=Object(r.useContext)(_),a=(t.login,t.userData),n=t.allDepartmentsData,l=t.allUsersData,c=t.allVacationsData,i=t.dispatch,u=t.allYearsData,s=(t.updateYears,Ne(Object(r.useState)((new Date).getFullYear()),2)),m=s[0],f=s[1],d=Ne(Object(r.useState)([]),2),b=d[0],v=d[1],y=Ne(Object(r.useState)(0),2),g=y[0],w=y[1],O=Ne(Object(r.useState)([]),2),j=O[0],S=O[1],D=Ne(Object(r.useState)([]),2),N=D[0],A=D[1];Object(r.useEffect)((function(){if(+a.role_id===E){var e=n.filter((function(e){return+e.id==+a.department_id}));v(e),w(+e[0].id)}else v(n),w(+n[0].id)}),[n,a]),Object(r.useEffect)((function(){if(+a.role_id===E){var e=c.filter((function(e){return+e.user_id==+a.id}));S(e)}else S(c)}),[c,a]),Object(r.useEffect)((function(){var e=l.filter((function(e){return+e.department_id==+g})).map((function(e){return+e.id})),t=g===h?j.filter((function(e){return new Date(+e.vacation_start).getFullYear()===+m&&new Date(+e.vacation_end).getFullYear()===+m})):j.filter((function(t){return-1!==e.indexOf(+t.user_id)&&new Date(+t.vacation_start).getFullYear()===+m&&new Date(+t.vacation_end).getFullYear()===+m}));A(t)}),[l,j,m,g]);return 0==j.length?o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",null,"Нет отпусков")):o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",{className:B()(De.a["page-title"])},"Список отпусков"),o.a.createElement("div",{className:B()(De.a.wrap)},o.a.createElement("div",{className:B()(De.a["wrap__add-vacation"])},o.a.createElement(p.b,{to:"vacation/new-vacation",className:B()(De.a["button-new-object"],De.a[".button-new-object__text"])},"Добавить отпуск")),o.a.createElement("div",{className:B()(De.a.wrap__manage)},o.a.createElement("div",{className:B()(De.a.wrap__year)},o.a.createElement(oe,{identificate:"selectYear",title:"Выберите год",defaultValue:(new Date).getFullYear(),handleFunction:function(e){f(+e)},data:u})),o.a.createElement("div",{className:B()(De.a.wrap__select)},o.a.createElement(oe,{identificate:"selectDepartmentInVacationList",title:"Выберите отдел",defaultValue:b[0].id,handleFunction:function(e){w(e)},data:b})))),o.a.createElement("div",null,0===N.length?o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",null,"Нет отпусков")):N.map((function(e,t){var a=l.length>0?l.find((function(t){return+e.user_id==+t.id})):{name:"Получение имени ...",surname:"Получение фамилии ..."},n="".concat(a.name," ").concat(a.surname);return o.a.createElement("div",{key:e.id,className:B()(De.a["one-row"])},o.a.createElement("div",{className:B()(De.a["one-row__number"])},o.a.createElement("span",null,"".concat(t+1,"."))),o.a.createElement("div",{className:B()(De.a["one-row__name"],De.a["one-row__elem"])},o.a.createElement("span",null,n)),o.a.createElement("div",{className:B()(De.a["one-row__dates"],De.a["one-row__elem"])},o.a.createElement("span",null,"".concat(new Date(e.vacation_start).getFullYear(),"-").concat(new Date(e.vacation_start).getMonth()+1,"-").concat(new Date(e.vacation_start).getDate(),"  :  ").concat(new Date(e.vacation_end).getFullYear(),"-").concat(new Date(e.vacation_end).getMonth()+1,"-").concat(new Date(e.vacation_end).getDate()))),o.a.createElement("div",{className:B()(De.a["one-row__buttons"],De.a["one-row__elem"])},o.a.createElement(p.b,{to:"vacation/".concat(e.id),className:B()(De.a["one-row__redaction"])},"Редактировать"),o.a.createElement("button",{onClick:function(){return t=e.id,console.log("delete",t),void i({type:"DELETE_THIS_VACATION",payload:+t});var t},className:B()(De.a["one-row__delete"])},"Удалить")))}))))},xe=a(51),Fe=a.n(xe);function Ce(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ke(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ke(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Te=function(e){var t=e.history,a=Object(r.useContext)(d),n=(a.getVacationsRef,a.getUsersRef,Object(r.useContext)(_)),l=(n.login,n.userData),c=n.allUsersData,i=n.allVacationsData,u=n.dispatch,s=Ce(Object(r.useState)(e.match.params.id),2),m=s[0],f=(s[1],Ce(Object(r.useState)(c),2)),p=f[0],b=f[1],v=Ce(Object(r.useState)(0),2),y=v[0],g=v[1],h=Ce(Object(r.useState)(i),2),O=h[0],j=(h[1],Ce(Object(r.useState)(""),2)),S=(j[0],j[1]),D=Ce(Object(r.useState)(0),2),N=D[0],A=D[1],I=Ce(Object(r.useState)(0),2),x=I[0],F=I[1],C=Ce(Object(r.useState)(0),2),k=C[0],T=C[1],Y=Ce(Object(r.useState)(0),2),P=Y[0],R=Y[1],M=Ce(Object(r.useState)(0),2),V=M[0],U=M[1];Object(r.useEffect)((function(){if(+l.role_id===w||+l.role_id===E){var e=c.filter((function(e){return+e.id===l.id}));b(e)}else b(c)}),[c,l]),Object(r.useEffect)((function(){if(void 0!==m&&"new-vacation"!==m&&0!==m&&i.length>0&&p.length>0){console.log(i,p,m);var e=i.filter((function(e){return e.id===+m})),t=p.find((function(t){return+t.id==+e[0].user_id}));S("".concat(t.name," ").concat(t.surname));var a=e[0].vacation_start;R(a),F("".concat(new Date(a).getFullYear(),"-").concat(new Date(a).getMonth()+1>9?new Date(a).getMonth()+1:"0".concat(new Date(a).getMonth()+1),"-").concat(new Date(a).getDate()>9?new Date(a).getDate():"0".concat(new Date(a).getDate())));var n=e[0].vacation_end;U(n),T("".concat(new Date(n).getFullYear(),"-").concat(new Date(n).getMonth()+1>9?new Date(n).getMonth()+1:"0".concat(new Date(n).getMonth()+1),"-").concat(new Date(n).getDate()>9?new Date(n).getDate():"0".concat(new Date(n).getDate()))),A(e[0].id),g(+t.id)}else S("Имя нового отпускника"),A((new Date).getTime()),p[0]?g(p[0].id):g(0)}),[p,i]);return o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",{className:B()(Fe.a["page-title"])},"new-vacation"===m?"Новый отпуск":"Отпуск для пользователя"),o.a.createElement("div",null,o.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=O.findIndex((function(e){return+e.id==+N}));-1!==a?(O[+a].user_id=y,O[+a].vacation_end=V,O[+a].vacation_start=P,0!==y&&0!==V&&0!==P?(u({type:"SET_VACATIONS",payload:O}),t.push("/vacations")):alert("Ошибка в данных")):(O.push({user_id:y,vacation_end:V,vacation_start:P,id:(new Date).getTime()}),0!==y&&0!==V&&0!==P?(u({type:"SET_VACATIONS",payload:O}),t.push("/vacations")):alert("Ошибка в данных"))},className:B()(Fe.a.form)},o.a.createElement("div",{className:B()(Fe.a["form-field"],Fe.a["form-field__select-wrap"])},o.a.createElement("label",{htmlFor:"user",className:B()(Fe.a["select-label"])},"Пользователь:"),o.a.createElement("select",{id:"user",name:"user",value:+y,onChange:function(e){g(e.target.value)},className:B()(Fe.a["select-element"])},p.map((function(e){var t="".concat(e.name," ").concat(e.surname);return o.a.createElement("option",{key:e.id,value:+e.id},t)})))),o.a.createElement("div",{className:B()(Fe.a["form-field"],Fe.a["form-field__input-date-wrap"])},o.a.createElement("label",{htmlFor:"vacation_start",className:B()(Fe.a["select-label"])},"Начало отпускного периода:"),o.a.createElement("input",{type:"date",id:"vacation_start",name:"vacation_start",value:x,onChange:function(e){F(e.target.value),R(e.target.valueAsNumber)},className:B()(Fe.a["date-input"])})),o.a.createElement("div",{className:B()(Fe.a["form-field"],Fe.a["form-field__input-date-wrap"])},o.a.createElement("label",{htmlFor:"vacation_end",className:B()(Fe.a["select-label"])},"Конец отпускного периода:"),o.a.createElement("input",{type:"date",id:"vacation_end",name:"vacation_end",value:k,onChange:function(e){T(e.target.value),U(e.target.valueAsNumber)},className:B()(Fe.a["date-input"])})),o.a.createElement("div",{className:B()(Fe.a["form-field"])},o.a.createElement("button",{className:B()(Fe.a["submit-button"])},"Отправить")))))},Ye=a(34),Pe=a.n(Ye);function Re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Me(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Me(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Ve=function(e){var t=e.history,a=Object(r.useContext)(d),n=a.getRolesRef,l=a.getUsersRef,c=(a.getDepartmentsRef,Re(Object(r.useState)(e.match.params.id),2)),i=c[0],u=(c[1],Re(Object(r.useState)([]),2)),s=u[0],m=u[1],f=Re(Object(r.useState)(0),2),p=(f[0],f[1],Re(Object(r.useState)(""),2)),b=p[0],v=p[1],y=Re(Object(r.useState)(""),2),g=y[0],h=y[1],E=Re(Object(r.useState)(""),2),O=E[0],j=E[1],S=Re(Object(r.useState)([]),2),D=S[0],N=S[1],A=Re(Object(r.useState)(0),2),I=A[0],x=A[1],F=Re(Object(r.useState)([]),2),C=F[0],k=F[1],T=Re(Object(r.useState)(0),2),Y=T[0],P=T[1],R=Object(r.useContext)(_),M=(R.userData,R.allDepartmentsData),V=R.allUsersData;R.allVacationsData;Object(r.useEffect)((function(){n().once("value").then((function(e){return e.val()})).then((function(e){return N(e)})).catch((function(e){return console.log(e)})).finally((function(){return console.log("сходили за юзерами")}))}),[]),Object(r.useEffect)((function(){if(i&&s.length>0&&D.length>0)if("new-user"===i){var e=D.find((function(e){return+e.id===w}));x(+e.id)}else{var t=s.find((function(e){return+e.id==+i}));if(void 0!==t.role_id)x(+t.role_id);else{var a=D.find((function(e){return+e.id===w}));x(+a.id)}}}),[s,D]),Object(r.useEffect)((function(){m(V)}),[V]),Object(r.useEffect)((function(){var e=M.filter((function(e){return 99999!=+e.id&&"Все"!==e.name}));k(e)}),[M]),Object(r.useEffect)((function(){if(console.log(s,C,i),"new-user"!==i&&s.length>0&&void 0!==i){var e=s.find((function(e){return+e.id==+i}));v(e.name),h(e.surname),j(e.login),P(+e.department_id)}"new-user"===i&&C.length>0&&P(+C[0].id)}),[C,s]);return o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",{className:B()(Pe.a["page-title"])},"new-user"===i?"Новый пользователь":"Редактировать пользователя"),o.a.createElement("div",null,o.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=s.findIndex((function(e){return+e.id==+i}));-1!==a?(s[+a].name=b,s[+a].surname=g,s[+a].login=O,s[+a].department_id=Y,s[+a].role_id=I,""!==b&&""!==g&&""!==O&&""!==Y?l().set(s).then((function(){return t.push("/users")})).catch((function(e){return console.log(e)})):alert("Ошибка в данных")):(s.push({name:b,surname:g,login:O,id:(new Date).getTime(),department_id:Y,role_id:I}),""!==b&&""!==g&&""!==O&&""!==Y?l().set(s).then((function(){return t.push("/users")})).catch((function(e){return console.log(e)})):alert("Ошибка в данных"))},className:B()(Pe.a.form)},o.a.createElement("div",{className:B()(Pe.a["form-field"],Pe.a["form-field__select-wrap"])},o.a.createElement("label",{htmlFor:"name",className:B()(Pe.a["select-label"])},"Имя:"),o.a.createElement("input",{type:"text",id:"name",name:"name",defaultValue:b,onChange:function(e){v(e.target.value)},className:B()(Pe.a["input-elem"])})),o.a.createElement("div",{className:B()(Pe.a["form-field"],Pe.a["form-field__select-wrap"])},o.a.createElement("label",{htmlFor:"surname",className:B()(Pe.a["select-label"])},"Фамилия:"),o.a.createElement("input",{type:"text",id:"surname",name:"surname",defaultValue:g,onChange:function(e){h(e.target.value)},className:B()(Pe.a["input-elem"])})),o.a.createElement("div",{className:B()(Pe.a["form-field"],Pe.a["form-field__select-wrap"])},o.a.createElement("label",{htmlFor:"login",className:B()(Pe.a["select-label"])},"Логин:"),o.a.createElement("input",{type:"text",id:"login",name:"login",defaultValue:O,onChange:function(e){j(e.target.value)},className:B()(Pe.a["input-elem"])})),o.a.createElement("div",{className:B()(Pe.a["form-field"],Pe.a["form-field__select-wrap"])},o.a.createElement("label",{htmlFor:"departament",className:B()(Pe.a["select-label"])},"Отдел:"),o.a.createElement("select",{id:"departament",name:"departament",value:+Y,onChange:function(e){P(e.target.value)},className:B()(Pe.a["select-element"])},C.map((function(e){return o.a.createElement("option",{key:+e.id,value:+e.id},e.name)})))),o.a.createElement("div",{className:B()(Pe.a["form-field"],Pe.a["form-field__select-wrap"])},o.a.createElement("label",{htmlFor:"roles",className:B()(Pe.a["select-label"])},"Набор прав:"),o.a.createElement(oe,{identificate:"roles",title:"Выберите набор прав",defaultValue:+I,handleFunction:function(e){x(+e)},data:D,className:B()(Pe.a["select-component"])})),o.a.createElement("div",{className:B()(Pe.a["form-field"])},o.a.createElement("button",{className:B()(Pe.a["submit-button"])},"Отправить")))))};function Ue(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Le(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Le(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Le(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var Ge=function(e){e.login;var t=e.userData,a=Ue(Object(r.useState)(+w),2),n=a[0],l=a[1];return Object(r.useEffect)((function(){t&&l(+t.role_id)}),[t]),o.a.createElement(i.d,null,o.a.createElement(i.b,{path:"/auth",render:function(e){return o.a.createElement(L,e)}}),n!==w?n!==E?o.a.createElement(o.a.Fragment,null,o.a.createElement(q,{path:y.users.url,component:pe}),o.a.createElement(q,{path:y.user.url,component:Ve}),o.a.createElement(q,{path:y["new-user"].url,component:Ve}),o.a.createElement(q,{path:y.departments.url,component:ge}),o.a.createElement(q,{path:y.department.url,component:je}),o.a.createElement(q,{path:y["new-department"].url,component:je}),o.a.createElement(q,{path:y.vacations.url,component:Ie}),o.a.createElement(q,{path:y.vacation.url,component:Te}),o.a.createElement(q,{path:y["new-vacation"].url,component:Te}),o.a.createElement(q,{path:y.home.url,exact:!0,component:ue})):o.a.createElement(o.a.Fragment,null,o.a.createElement(q,{path:y.vacations.url,component:Ie}),o.a.createElement(q,{path:y.vacation.url,component:Te}),o.a.createElement(q,{path:y["new-vacation"].url,component:Te}),o.a.createElement(q,{path:y.home.url,exact:!0,component:ue})):o.a.createElement(q,{path:y.home.url,exact:!0,component:ue}),o.a.createElement(i.a,{to:"/"}))},Je=a(169);a(617),a(620);function qe(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ze={apiKey:"AIzaSyCcY9SjOgc7yL6UihqaIq0wwlULYGIBnmM",authDomain:"vacations-app-9686b.firebaseapp.com",databaseURL:"https://vacations-app-9686b.firebaseio.com",projectId:"vacations-app-9686b",storageBucket:"vacations-app-9686b.appspot.com",messagingSenderId:"533684716413",appId:"1:533684716413:web:b66c494c733440e3b5c214"},Be=new function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),qe(this,"signWithEmail",(function(e,a){return t.auth.signInWithEmailAndPassword(e,a)})),qe(this,"getRolesRef",(function(){return t.database.ref("/roles/")})),qe(this,"getYearsRef",(function(){return t.database.ref("/years/")})),qe(this,"getDepartmentsRef",(function(){return t.database.ref("/departments/")})),qe(this,"getUsersRef",(function(){return t.database.ref("/users/")})),qe(this,"getVacationsRef",(function(){return t.database.ref("/vacations/")})),qe(this,"requestRef",(function(e){return t.database.ref(e)})),Je.a.initializeApp(ze),this.auth=Je.a.auth(),this.database=Je.a.database(),this.userUid=null};function Ze(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function We(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(a),!0).forEach((function(t){He(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Ze(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function He(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var Qe={allDepartments:[],allUsers:[],allVacations:[],allYears:[]};function Ke(e,t){Be.auth,Be.getUsersRef,Be.getDepartmentsRef;var a=Be.getVacationsRef;Be.getYearsRef;switch(t.type){case"ADD_ALL_DEPARTMENTS":var n=We({},e);return n.allDepartments=t.payload,n;case"ADD_ALL_VACATIONS":var r=We({},e);return r.allVacations=t.payload,r;case"ADD_ALL_USERS":var o=We({},e);return o.allUsers=t.payload,o;case"DELETE_THIS_VACATION":var l=We({},e),c=l.allVacations.filter((function(e){return+e.id!=+t.payload}));return l.allVacations=c,a().set(c),l;case"SET_VACATIONS":var i=We({},e);return i.allVacations=t.payload,a().set(i.allVacations),i;case"ADD_ALL_YEARS":var u=We({},e);return u.allYears=t.payload,u;default:return e}}function Xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var a=[],n=!0,r=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(n=(l=c.next()).done)&&(a.push(l.value),!t||a.length!==t);n=!0);}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return $e(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return $e(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $e(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var et=function(){var e=Object(r.useContext)(d),t=e.auth,a=e.getUsersRef,n=e.getDepartmentsRef,l=e.getVacationsRef,c=e.getYearsRef,i=Xe(Object(r.useReducer)(Ke,Qe),2),u=i[0],s=i[1],m=Xe(Object(r.useState)(!0),2),f=m[0],b=m[1],v=Xe(Object(r.useState)(!1),2),y=(v[0],v[1]),g=Xe(Object(r.useState)(""),2),h=g[0],w=g[1],E=Xe(Object(r.useState)(null),2),O=E[0],j=E[1],S=function(){c().once("value").then((function(e){return e.val()})).then((function(e){s({type:"ADD_ALL_YEARS",payload:e})})).catch((function(e){return console.log(e)})).finally((function(){return console.log("сходили за годами")}))};Object(r.useEffect)((function(){S()}),[]),Object(r.useEffect)((function(){n().on("value",(function(e){s({type:"ADD_ALL_DEPARTMENTS",payload:e.val()})}))}),[]),Object(r.useEffect)((function(){try{l().on("value",(function(e){s({type:"ADD_ALL_VACATIONS",payload:e.val()})}))}catch(e){console.log(e)}}),[]),Object(r.useEffect)((function(){localStorage.getItem("userId")?(console.log("we know who are you!"),t.onAuthStateChanged((function(e){b(!1),e?(y(e.uid),localStorage.setItem("userId",JSON.stringify(e.uid)),w(e.email),a().on("value",(function(t){var a=t.val();s({type:"ADD_ALL_USERS",payload:a});var n=a.find((function(t){return t.login===e.email}));j(n)}))):(y(!1),localStorage.removeItem("userId"))}))):(console.log("we don`t know who are you!"),y(!1),b(!1))}),[]);var D=Ge({login:h,userData:O});return f?o.a.createElement(Y,null):o.a.createElement(o.a.Fragment,null,o.a.createElement(p.a,null,o.a.createElement(_.Provider,{value:{login:h,userData:O,allDepartmentsData:u.allDepartments,allUsersData:u.allUsers,allVacationsData:u.allVacations,allYearsData:u.allYears,dispatch:s,updateYears:S}},D)))};a(622);c.a.render(o.a.createElement(d.Provider,{value:Be},o.a.createElement(et,null)),document.getElementById("root"))},87:function(e,t,a){e.exports={"content-title-block":"_3FNGMQ-zE50K4_ifpTiNmy","content-title-block__start-elem":"b36pquR0MFSJXNp-Muc9Z","content-title-block__elem":"_2-uWuAN1CGzVB5jO8LSwZm","page-title":"_1_UtturgCpyauKdEYtsVhx",wrap__manage:"_2JWJY8EB5vUDCsoeEmlpcb",wrap__select:"_5Rz1iDmOyhgHtaA6uVAOA",wrap__year:"_150dlS6aiBFL_J0KA0102k"}},88:function(e,t,a){e.exports={"page-title":"_2Lfe4Mtw8jkbQyA3josbay",form:"_3drwl5dPG9MNs31fnmBEvZ","form-field":"CnfZpkfu4LmDsUVWegHi_","form-field__select-wrap":"_3apSygjN4jJ5Sih86n8zTo","input-elem":"_2-OVDSQThvS-tZbjD1a68f","submit-button":"_1AaHCZVC1aEnBUPjaDF0kr"}}});